From f3799ac8e1aa11e119d39e985c9cecf5c5314a67 Mon Sep 17 00:00:00 2001
From: Krishna Balasubramanian <krishna0bala@proton.me>
Date: Sun, 18 May 2025 16:42:25 -0700
Subject: [PATCH 1/2] feat: make claude-code buffer unlisted
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Prevents claude-code terminal buffer from appearing in buffer lists (`:ls`, `:buffers`)
by adding 'setlocal nobuflisted' when creating the terminal window.

ðŸ¤– Generated with [Claude Code](https://claude.ai/code)

Co-Authored-By: Claude <noreply@anthropic.com>
---
 CHANGELOG.md                 |  1 +
 lua/claude-code/terminal.lua |  1 +
 tests/spec/terminal_spec.lua | 23 ++++++++++++++++++++++-
 3 files changed, 24 insertions(+), 1 deletion(-)

diff --git a/lua/claude-code/terminal.lua b/lua/claude-code/terminal.lua
index 6adaf16..b6c4c91 100644
--- a/lua/claude-code/terminal.lua
+++ b/lua/claude-code/terminal.lua
@@ -155,6 +155,7 @@ function M.toggle(claude_code, config, git)

     vim.cmd(cmd)
     vim.cmd 'setlocal bufhidden=hide'
+    vim.cmd 'setlocal nobuflisted'

     -- Create a unique buffer name (or a standard one in single instance mode)
     local buffer_name
